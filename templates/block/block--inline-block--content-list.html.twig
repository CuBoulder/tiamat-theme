{#
/**
 * @file Template to implement the "Content List" block type
 * @author Timur Tripp
*/
#}

{{ attach_library('boulderD9_base/ucb-content-list') }}

{% set blockContent = content['#block_content'] %}
{% set sort = blockContent.field_content_list_sort.value %}
{% set display = blockContent.field_content_list_display.value %}

{%
	set classes = [
		'container',
		'block',
		'block-' ~ configuration.provider|clean_class,
		'block-' ~ plugin_id|clean_class,
		bundle ? 'block--type-' ~ bundle|clean_class,
		view_mode ? 'block--view-mode-' ~ view_mode|clean_class,
		'ucb-content-list-display-' ~ display
	]
%}

{% block content %}<div{{ attributes.addClass(classes) }}>
	{{ title_prefix }}
	{% if label %}<h2{{ title_attributes }}>{{ label }}</h2>{% endif %}
	{{ title_suffix }}
	<div class="ucb-content-list-container">
		{% if display == 'teaser' %}{% for key, item in blockContent.field_content_list_content if key|first != '#' %}<div class="row ucb-content-list-row">
			<div class="col-9">
				<h4 class="ucb-content-list-title"><a href="{{ item.entity.path.alias }}">{{ item.entity.title.0.value }}</a></h4>
				{% set summary = item.entity.body.0.summary %}{% if summary %}<p class="ucb-content-list-summary">{{ summary }}</p>{% endif %}
			</div>
			{% set image = item.entity.field_ucb_person_photo.entity.field_media_image %}
			<div class="ucb-content-list-image-container col-3{{ image ? '' : ' ucb-content-list-image-empty' }}">{% if image %}
				{% set imageURI = image.entity.fileuri|image_style('focal_image_square') %}{% set imageAlt = image.alt|render %}
				<img class="ucb-content-list-image" src="{{ imageURI }}" alt="{{ imageAlt }}">
			{% endif %}</div>
		</div>{% endfor %}{% elseif display == 'embed' %}{% for key, item in blockContent.field_content_list_content if key|first != '#' %}<div class="row ucb-content-list-row">
			{% set image = item.entity.field_ucb_person_photo.entity.field_media_image %}
			<div class="ucb-content-list-image-container col-2{{ image ? '' : ' ucb-content-list-image-empty' }}">{% if image %}
				{% set imageURI = image.entity.fileuri|image_style('focal_image_square') %}{% set imageAlt = image.alt|render %}
				<img class="ucb-content-list-image" src="{{ imageURI }}" alt="{{ imageAlt }}">
			{% endif %}</div>
			<div class="col-9">
				<h4 class="ucb-content-list-title"><a href="{{ item.entity.path.alias }}">{{ item.entity.title.0.value }}</a></h4>
				{% set summary = item.entity.body.0.summary %}{% if summary %}<p class="ucb-content-list-summary">{{ summary }}</p>{% endif %}
			</div>
		</div>{% endfor %}{% elseif display == 'title' %}<ul>{% for key, item in blockContent.field_content_list_content if key|first != '#' %}
			<li class="ucb-content-list-row ucb-content-list-title"><a href="{{ item.entity.path.alias }}">{{ item.entity.title.0.value }}</a></li>
		{% endfor %}</ul>
		{% elseif display == 'sidebar' %}{# TODO Sidebar #}
		{% endif %}
	</div>
</div>{% endblock content %}