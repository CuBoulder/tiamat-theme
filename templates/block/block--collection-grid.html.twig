
{%
    set classes = [
      'block',
      'container',
      'block-' ~ configuration.provider|clean_class,
      'block-' ~ plugin_id|clean_class,
      bundle ? 'block--type-' ~ bundle|clean_class,
      view_mode ? 'block--view-mode-' ~ view_mode|clean_class,
  ]
  %}

{# This block mirrors the Article List Node - constructs a JSON endpoint in TWIG using include filters #}
{% set collectionsCatsJSON = (url('<front>')|render|trim('/'))
    ~ '/jsonapi/taxonomy_term/collection_category'
    
  %}
{# JSON API Endpoint information #}
{% set collectionsJSON = (url('<front>')|render|trim('/'))
    ~ '/jsonapi/node/collection_item_page'
    ~ '?include=field_collection_item_thumbnail.field_media_image'
    ~ '&fields[file--file]=uri,url'
  %}

  {% set includeTags = "" %}
  {% set myTypes = content.field_collection_grid_type %}


  {% set filterItemsStyle = "collection-filter-hide" %}
  {% if content.field_collections_filter|render|striptags|trim == "Fade Items" %}
      {% set filterItemsStyle = "collection-filter-fade" %}
  {% endif %}

  {% set multiselectStyle = "collection-multiselect-single" %}
  {% if content.field_collections_multiselect|render|striptags|trim == "Multi Select List" %}
      {% set multiselectStyle = "collection-multiselect-multi" %}
  {% endif %}


  {% set displayStyle = "show" %}
  {% if content.field_collections_display|render|striptags|trim == "Hide" %}
      {% set displayStyle = "hide" %}
  {% endif %}

{{ attach_library('boulder_base/ucb-collections-block') }}
{% block content %}
	<div{{attributes.addClass(classes)}}>
  

  <div class = "collection-grid-container {{filterItemsStyle}} {{mutliselectStyle}}">
		<div class="collections-filter-list">

				{% for key, item in content['#block_content'].field_collection_category_select %}
					{%  if key|first != '#' %}
              {{item.entity.collection-grid-filter.entity.field_collection_grid_label.entity.content }}
					{% endif %}
				{% endfor %}
			{{ content.field_collection_category_select}}
			{#<input type="reset" value="Reset Filters" class="category-filter-reset" onclick = "resetFilters()" ></input>#}
	  </div>
    <div id="collections-grid-block-data" 
    data-jsonapi="{{ collectionsJSON }}"
    data-jsonCats="{{ collectionsCatsJSON }}"
    data-exTags= "{{ content.field_collection_grid_type|render|striptags|trim}}"
    data-bodyDisplay = {{ displayStyle }}
    class = "collections-grid-block-data">
    </div>
  </div>
{% endblock content %}
