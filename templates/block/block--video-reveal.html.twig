{#
/**
 * @file
 * Theme to implement the video reveal block
 *
 * Created by Joshua Nicholson on 08/09/22
*
#}

{{ attach_library('boulderD9_base/ucb-video-reveal') }}

{%
  set classes = [
	'container',
    'ucb-video-reveal',
    'block',
    'block-' ~ configuration.provider|clean_class,
    'block-' ~ plugin_id|clean_class,
    bundle ? 'block--type-' ~ bundle|clean_class,
    view_mode ? 'block--view-mode-' ~ view_mode|clean_class
  ]
%}

{% set blockId = content['#block_content'].id() %}
{% if content['#block_content'].field_video_reveal_video.entity.field_media_oembed_video is defined %}
	{% set videoURL = content['#block_content'].field_video_reveal_video.entity.field_media_oembed_video.value %}
{% endif %}


{% block content %}
	<div{{attributes.addClass(classes)}}>
		{{ title_prefix }}
		{% if label %}
			<h2{{title_attributes}}>{{ label }}</h2>
		{% endif %}
		{{ title_suffix }}
		<div id="ucb-video-block-{{ blockId }}" class="ucb-video-text-div">
			<div hidden class="ucb-hero-unit-video-wrapper">
				<div class="ucb-hero-unit-video-player-wrapper" id="ucb_hero_unit_video_player_{{ blockId }}"></div>
				<div class="ucb-hero-unit-video-controls-wrapper">
					<div class="ucb-hero-unit-video-controls">
						<div class="ucb-video-reveal-controls">
							<span class="ucb-video-reveal-text">{{ content.field_video_reveal_text}}</span>
						</div>
						<div>
							<div class="ucb-video-reveal-image">
								{{ content.field_video_reveal_image|render }}
							</div>
						<span class="ucb-hero-unit-video-control-button ucb-hero-unit-video-play-pause" title="Play/Pause video">
							<i class="fa fa-play"></i>
						</span>
						</div>
					</div>
				</div>
			</div>
			</div>
			<script type="text/javascript">
				window.addEventListener('load', () => enableVideoHero('{{ videoURL }}', 'ucb_hero_unit_video_player_{{ blockId }}'));
			</script>
		</div>
	</div>
{% endblock content %}
