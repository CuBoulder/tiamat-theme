{#
/**
* Theme layout to display a UCB Newsletter Page in Email HTML.
*
* Notes: You must render Node data within a properly nested <td> element: <table>, <tbody>, <tr>, <td>, THEN your data within the <td> for Twig to nest it properly.
* Otherwise your data will break out of the table and instead become a sibling element to the outer table element
* See: https://www.w3schools.com/html/html_tables.asp
*/
#}

{%
    set classes = [
    'node',
    'node--type-' ~ node.bundle|clean_class,
    not node.isPublished() ? 'node--unpublished',
    view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
    ]
%}


<div class="container" id="email-preview" style="background-color: grey">
    <div id="email" style="width:600px;margin: auto;background:white;">
        <table role="presentation" border="0" width="100%" cellspacing="0" style="border-collapse: collapse; border-spacing: 0; padding: 0; text-align: left; vertical-align: top; height: 100%; width: 100%; color: #222222; font-family: Helvetica, Arial, sans-serif; font-weight: normal; line-height: 19px; margin: 0; font-size: 14px; background-color: #f2f2f2;">
            <!-- Header --> 
            {# TO DO: Header #}
            <tr>
                <h1 id="newsletter-email-title" style="padding: 30px 30px 15px 60px;font-size: 52px; margin:0 0 20px 0; font-family:Roboto, Helvetica Neue, Helvetica, Arial, sans-serif;"> {{ label }}</h1>
              <td align="center" style="text-align: left; padding-right:10px; padding-left:10px">
            <!-- Intro Img --> 
                {% if content.field_newsletter_intro_image|render %}
                <img id="newsletter-email-intro-img" src="{{file_url(node.field_newsletter_intro_image.entity.field_media_image.entity.fileuri)}}" width="100%" style="margin-bottom: 20px;">
                {% endif %}
            <!-- Intro Text-->
                {% if content.field_newsletter_intro_body|render %}
                <div id="newsletter-intro-body">{{ content.field_newsletter_intro_body }}</div>
                {% endif %}
                </td>
            </tr>
        </table>
        <!--Second table-->
        {% if content.field_newsletter_section_block|render %}
        <!--Newsletter Section-->
        {{content.field_newsletter_section_block|render}}
            {% endif %}
        <!--Ad One-->
			{% if content.field_newsletter_promo_image_one|render %}
				{% if content.field_newsletter_promo_link_one|render %}
                <table role="presentation">
                    <tbody>
                        <tr>
                            <td>
                                <a href="{{ content.field_newsletter_promo_link_one|render|striptags|trim }}">
                                    <img src="{{file_url(node.field_newsletter_promo_image_one.entity.field_media_image.entity.fileuri|image_style('focal_image_square'))}}"/>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
				{% else %}
                <table role="presentation">
                    <tbody>
                        <tr>
                            <td>
                                <img src="{{file_url(node.field_newsletter_promo_image_one.entity.field_media_image.entity.fileuri|image_style('focal_image_square'))}}"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
				{% endif %}
			{% endif %}
        <!--Promo Blocks-->
        <table role="presentation">
			<tbody>
                <tr>
                    <td>
                        <!--Promo Block 1-->
                        <table role="presentation">
                            <tbody>
                        {% if content.field_newsletter_block_title_one|render %}
                                <tr>
                                    <td>
                                        <h3>{{ content.field_newsletter_block_title_one|render }}</h3>
                                    </td>
                                </tr>
                        {% endif %}

                        {% if content.field_newsletter_block_text_one|render %}
                            <tr>
                                <td>{{ content.field_newsletter_block_text_one|render }}</td>
                            </tr>
                        {% endif %}
                            </tbody>
                        </table>
                    </td>
                    <td>
                     <!--Promo Block 2-->
                        <table role="presentation">
                            <tbody>
                    {% if content.field_newsletter_block_title_two|render %}
                                <tr>
                                    <td>
                                        <h3>{{ content.field_newsletter_block_title_two|render }}</h3>
                                    </td>
                                </tr>
                    {% endif %}
                    {% if content.field_newsletter_block_text_two|render %}
                    <tr>
                        <td>    {{ content.field_newsletter_block_text_two|render }}</td>
                    
                    </tr>
                    {% endif %}
                            </tbody>
                            </table>
                            </td>
                </tr>
            </tbody>
        </table>
        <!--Ad Two-->
        {% if content.field_newsletter_promo_image_two|render %}
        {% if content.field_newsletter_promo_link_two|render %}
        <table role="presentation">
            <tbody>
                <tr>
                    <td>
                        <a href="{{ content.field_newsletter_promo_link_two|render|striptags|trim }}">
                            <img src="{{file_url(node.field_newsletter_promo_image_two.entity.field_media_image.entity.fileuri|image_style('focal_image_square'))}}"/>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
        {% else %}
        <table role="presentation">
            <tbody>
                <tr>
                    <td>
                        <img src="{{file_url(node.field_newsletter_promo_image_two.entity.field_media_image.entity.fileuri|image_style('focal_image_square'))}}"/>
                    </td>
                </tr>
            </tbody>
        </table>	
        {% endif %}
    {% endif %}
        <!--Footer-->
        {# TO DO: Footer #}
    </div>
</div>